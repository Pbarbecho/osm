

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Command Line Interface &mdash; osm 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> osm
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Automating large-scale simulations for OMNeT++</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Command Line Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#getting-help">Getting help</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-and-run-the-simulation-campaign">Build and run the simulation campaign</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parsing-simulation-results">Parsing simulation results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#analyzing-simulation-results">Analyzing simulation results</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">osm</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Command Line Interface</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/cli.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="command-line-interface">
<span id="cli"></span><h1>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h1>
<p>In order to easy use of OMNeT++ simulation manager (OSM), it includes a command line interface.
OSM cope with the typical tasks that includes the large-scale simulations workflow.</p>
<div class="section" id="getting-help">
<h2>Getting help<a class="headerlink" href="#getting-help" title="Permalink to this headline">¶</a></h2>
<p>OSM cli comes with –help option. Each sub-commands are detailed below::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">osm</span> <span class="o">--</span><span class="n">help</span>

<span class="n">Usage</span><span class="p">:</span> <span class="n">osm</span> <span class="p">[</span><span class="n">OPTIONS</span><span class="p">]</span> <span class="n">COMMAND</span> <span class="p">[</span><span class="n">ARGS</span><span class="p">]</span><span class="o">...</span>

  <span class="n">CLI</span> <span class="n">OSM</span> <span class="n">Simulation</span> <span class="n">manager</span><span class="o">.</span> <span class="n">Execute</span> <span class="n">large</span><span class="o">-</span><span class="n">scale</span> <span class="n">OMNeT</span><span class="o">++</span> <span class="n">simulations</span><span class="o">.</span>

<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">v</span>      <span class="n">verbose</span>
  <span class="o">--</span><span class="n">help</span>  <span class="n">Show</span> <span class="n">this</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span><span class="o">.</span>

<span class="n">Commands</span><span class="p">:</span>
  <span class="n">analyzer</span>  <span class="n">Customized</span> <span class="n">filtering</span> <span class="ow">and</span> <span class="n">plotting</span><span class="o">.</span>
  <span class="n">launcher</span>  <span class="n">Build</span> <span class="n">the</span> <span class="n">simulation</span> <span class="n">campaign</span><span class="o">.</span>
  <span class="n">parser</span>    <span class="n">Merge</span> <span class="n">result</span> <span class="n">files</span> <span class="n">into</span> <span class="n">one</span> <span class="n">single</span> <span class="n">output</span> <span class="n">file</span> <span class="p">(</span><span class="o">.</span><span class="n">npy</span><span class="p">,</span> <span class="o">.</span><span class="n">mat</span><span class="p">,</span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="build-and-run-the-simulation-campaign">
<h2>Build and run the simulation campaign<a class="headerlink" href="#build-and-run-the-simulation-campaign" title="Permalink to this headline">¶</a></h2>
<p>Simulation campaign can be run through the launcher sub-command. The same command is used to pass users configurations as detailed below.
Once the launcher sub-command is executed, information of the build simulation campaign is prompted and the uset choices
to execute simulations. To extend information of osm launcher command usage, the –help flag can be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$osm launcher --help

Usage: osm launcher [OPTIONS] INIFILE MAKEFILE

  Build and run the simulation campaign.

Options:
  --omnet-path PATH               OMNET++ installation directory
  --output-dir PATH               Path to directory where results are saved.
  --max-processes INTEGER         The maximum number of parallel simulations.
                                  By default available cpus are used.

  -t, --sim-time INTEGER          Simulation time. Common for all scenarios in
                                  simulation campaign.  [default: 300]

  -r, --repetitions INTEGER       Number of repetitions.  [default: 1]
  -a, --analyze                   Analyze a group of files from a previous
                                  simulation campaign, looking for missing
                                  files.

  -add, --additional-files-path PATH
                                  Path to iteration varibles and structure
                                  files. [default: parents directory]

  --help                          Show this message and exit.
</pre></div>
</div>
<p>Two arguments are required:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Path to OMNeT++ configuration file (omnetpp.ini)</p></li>
<li><p>The project executable location.</p></li>
</ol>
</div></blockquote>
<p>As options, the OMNeT++ installation path, the output directory where simulation results will be save and the directory to additional files (structure and variables) in case of customized recording.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">osm</span> <span class="n">launcher</span> <span class="o">~/</span><span class="n">veins</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">omnetpp</span><span class="o">.</span><span class="n">ini</span> <span class="o">~/</span><span class="n">veins</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">veins_executable</span> <span class="o">--</span><span class="nb">max</span><span class="o">-</span><span class="n">processes</span> <span class="mi">20</span> <span class="o">-</span><span class="n">t</span> <span class="mi">500</span> <span class="o">-</span><span class="n">r</span> <span class="mi">20</span> <span class="o">--</span><span class="n">add</span> <span class="o">~/</span><span class="n">additionals</span><span class="o">/</span> <span class="o">--</span><span class="n">output</span><span class="o">-</span><span class="nb">dir</span> <span class="o">~/</span><span class="n">results</span><span class="o">/</span>
</pre></div>
</div>
<p>Simulation campaign summary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">============================</span>
<span class="n">Simulation</span> <span class="n">campaign</span> <span class="n">summary</span>
<span class="o">============================</span>

<span class="n">Scenarios</span> <span class="n">to</span> <span class="n">simulate</span> <span class="p">[</span><span class="n">scenario</span><span class="p">]:</span> <span class="p">[</span><span class="s1">&#39;Barcelona&#39;</span><span class="p">,</span> <span class="s1">&#39;Berlin&#39;</span><span class="p">,</span> <span class="s1">&#39;Tokio&#39;</span><span class="p">]</span>
<span class="n">Iteration</span> <span class="n">variables</span><span class="p">:</span> <span class="mi">2</span> <span class="o">=</span> <span class="p">[([</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39; 30&#39;</span><span class="p">,</span> <span class="s1">&#39; 60&#39;</span><span class="p">,</span> <span class="s1">&#39; 90&#39;</span><span class="p">],</span> <span class="s1">&#39;s&#39;</span><span class="p">),</span> <span class="p">([</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39; 50&#39;</span><span class="p">,</span> <span class="s1">&#39; 300&#39;</span><span class="p">],</span> <span class="s1">&#39;s&#39;</span><span class="p">)]</span>
<span class="n">Repetitions</span> <span class="n">per</span> <span class="n">scenario</span><span class="p">:</span> <span class="mi">20</span>
<span class="n">Simulation</span> <span class="n">time</span><span class="p">:</span> <span class="mi">300</span><span class="n">s</span>
<span class="n">Total</span> <span class="n">Runs</span><span class="p">:</span> <span class="mi">720</span>


<span class="n">Build</span> <span class="n">simulation</span> <span class="n">campaign</span> <span class="p">(</span><span class="o">*</span><span class="n">Y</span><span class="o">/</span><span class="n">N</span><span class="p">):</span>
</pre></div>
</div>
</div>
<div class="section" id="parsing-simulation-results">
<h2>Parsing simulation results<a class="headerlink" href="#parsing-simulation-results" title="Permalink to this headline">¶</a></h2>
<p>The sub-command parser, can be used to merge into a unique output file simulation campaign results. The –additional-files-path or –add
includes the path to ‘variables’ and ‘structure’ files.</p>
<blockquote>
<div><ul>
<li><p>Variables file: Include the iteration variable with the set of values. The OMNeT++ syntax is used to declare iteration variables.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*.</span><span class="n">node</span><span class="p">[</span><span class="o">*</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">veinsmobility</span><span class="o">.</span><span class="n">accidentDuration</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">300</span><span class="p">}</span><span class="n">s</span>
<span class="o">*.</span><span class="n">node</span><span class="p">[</span><span class="o">*</span><span class="p">]</span><span class="o">.</span><span class="n">appl</span><span class="o">.</span><span class="n">beaconInterval</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">90</span><span class="p">}</span><span class="n">s</span>
</pre></div>
</div>
</li>
<li><p>Structure file: Include the structure (n-dimension) of results files. This file is pass in combination with the variable file to map columns with the corresponding parameter (Column name). Columns are listed separated wih a comma as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Type</span><span class="p">,</span><span class="n">NodeID</span><span class="p">,</span><span class="n">tx</span><span class="o">/</span><span class="n">rx</span><span class="p">,</span><span class="n">recAddress</span><span class="p">,</span><span class="n">Speed</span><span class="p">,</span><span class="n">MsgId</span><span class="p">,</span><span class="n">Length</span><span class="p">,</span><span class="n">CH</span><span class="p">,</span><span class="n">Time</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<p>Results are exported to any of the supported output formats .npy, .mat, .csv for later process within MATLAB or within the OSM analyzer.
Further details of parser command usage can be listed with the –help flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$osm launcher --help

Usage: osm parser [OPTIONS]

  Merge result files into one single output file (.npy, .mat, .csv).

Options:
  --max-processes INTEGER         The maximum number of parallel simulations.
                                  By default available cpus are used.

  -i, --input-dir PATH            Directory containing simulations results.
  -o, --output-dir PATH           Path to directory where output file is
                                  saved.

  -O, --output-filename TEXT      Filename with supported extension .npy
                                  (Numpy), .mat (Matlab) or csv (Comma-
                                  separated values).

  -add, --additional-files-path PATH
                                  Path to iteration varibles and structure
                                  files. [default: parents directory]

  --help                          Show this message and exit.
</pre></div>
</div>
<p>In case of no input, output and max processes options are included with the parser command,
by default the installation path create the input folder we the simulation is launched. In the same manner, the output folder and file’s name (results.csv) are created we parser command is executed without options. By default de maximum number of processes is used.
The following command, will try to automatically parse result files into an output file with sim.csv format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$osm parser --add ~/additionals/ --input-dir ~/results/ --output-dir ~/summary/sim.csv
</pre></div>
</div>
</div>
<div class="section" id="analyzing-simulation-results">
<h2>Analyzing simulation results<a class="headerlink" href="#analyzing-simulation-results" title="Permalink to this headline">¶</a></h2>
<p>The analyzer command includes a customizable python script. Here, parsed results files can be filtered and sorted for plotting.
The plotting phase is simplified by using the common structure of results (pandas dataframes). An interactive plotting is available with the option -itp. It try to automatically open a web browser (default firefox) where columns can be easily drag and drop to generate custom plots. Extended information is available with the –help flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$osm analyzer --help
    Usage: osm analyzer [OPTIONS]

        Customized filtering and plotting.

    Options:
        -i, --input-cvs-file PATH       Input .csv file with merge results
        -o, --output-dir PATH           Path to directory where custom analyzed
                                        factors are saved.

        -plt, --interactive-pivot-table
                                        GUI in firefox to drag columns and plot
                                        resutls dataframe.

        --help                          Show this message and exit.
</pre></div>
</div>
<p>The output of the analyzer, includes figures and data used to generate plots:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Files</span> <span class="n">generated</span><span class="p">:</span>
    <span class="mi">0</span><span class="p">)</span> <span class="n">summary_</span><span class="o">%</span><span class="n">PL_df</span><span class="o">.</span><span class="n">png</span>
    <span class="mi">1</span><span class="p">)</span> <span class="n">summary_</span><span class="o">%</span><span class="n">PL_df</span><span class="o">.</span><span class="n">csv</span>
    <span class="mi">2</span><span class="p">)</span> <span class="n">summary_speed</span><span class="o">.</span><span class="n">png</span>
    <span class="mi">3</span><span class="p">)</span> <span class="n">summary_speed</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="_images/summary_speed.png" src="_images/summary_speed.png" />
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Pablo Barbecho

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>